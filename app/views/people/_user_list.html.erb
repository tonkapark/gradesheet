<table id="people" class="master">
  <thead>
    <tr>
      <%= sort_header_tag('type', :title => 'Type') %>    
      <% form_for people.class.to_s, :html => { :method => :get } do |s| %>        
        <%= sort_header_tag('firstname', :title => 'First Name') %>
        <%= sort_header_tag('lastname', :title => 'Last Name') %>
        <%= sort_header_tag('email', :title => 'Email Address') %>
        <th colspan="2"><%= text_field_tag :search, params[:search], :size => 10, :class => "focus search" %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% people.each do |person| %>      
      <% if person.class.name == 'Administrator' %>
      <tr class="<%= cycle('odd', 'even') %>" onclick="location.href='<%= edit_administrator_url(person) %>'">
      <% else %>
      <tr class="<%= cycle('odd', 'even') %>" onclick="location.href='<%= url_for(person) %>'">      
      <% end %>
        <td><%= person.class.name.titleize %></td>
        <% if person.class.name == 'Administrator' %>
        <td><%= link_to person.firstname, edit_administrator_url(person) %></td>
        <td><%= link_to person.lastname, edit_administrator_url(person) %></td>        
        <% else %>
        <td><%= link_to person.firstname, url_for(person) %></td>
        <td><%= link_to person.lastname, url_for(person) %></td>
        <% end %>
        <%= content_tag :td, person.email %>
        <td><%= button_to 'Delete', person, :method => :delete,
            :confirm => "Are you sure you want to delete\n\n '" + person.full_name + "'?",
            :class => 'btn negative' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<span class="paginate">
  <%= will_paginate people %>
</span>